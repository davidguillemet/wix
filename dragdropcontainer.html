<html>
<head>
<script>
	function sendMessage(msg) {
		const wn = document.getElementById('frame').contentWindow;
		wn.postMessage(msg, '*');
	}
	function add() {
		sendMessage({
			action: "add",
			image: "DSC_1318.jpg"
		});
	}
	function set() {
		sendMessage({
			action: "set",
			image: "DSC_4848.jpg"
		});
	}
	function device(deviceType) {
		sendMessage({
			action: 'device',
			device: deviceType
		});
	}
	function borderColor(color) {
		sendMessage({
			action: 'borderColor',
			color: color
		});
	}
	function borderColor(width) {
		sendMessage({
			action: 'borderWidth',
			width: width
		});
	}
	function setBorder(property, value) {
		sendMessage({
			action: 'border',
			property: property,
			value: value
		});
	}
	function removeAll() {
		sendMessage({
			action: 'removeAll'
		});
	}
	
	function exportProject() {
		sendMessage({
			action: 'export'
		});
	}
	
	function importProject() {
		const projectData = {
	"version": 1,
	"images": [
		{
			"url": "https://static.wixstatic.com/media/e50527_1ce64e7322af4431af6149903d22a436~mv2.jpg",
			"position": {
				"top": 65.98958587646484,
				"left": 651.99658203125
			},
			"width": 400.00694
		},
		{
			"url": "https://static.wixstatic.com/media/e50527_2fe44cbdb317491a9650031742533d27~mv2.jpg",
			"position": {
				"top": 63.99305725097656,
				"left": 67.98611450195312
			},
			"width": 400.00694
		}
	],
	"containerWidth": 1200,
	"background": "wix:image://v1/e50527_d86bb7f64ab94be7a28aba869c38c05e~mv2.jpg/bedroom-01.jpg#originWidth=1200&originHeight=800"
};
		sendMessage({
			action: 'import',
			data: projectData
		});
	}
	
	window.onmessage = (event) => {
		if (event.data) {
			const message = event.data;
			switch (message.action) {
			case "remove":
				console.log("new count = " + message.count);
				break;
			case "ready":
				console.log("ready !!")
				break;
			case "export":
				console.log(message.data);
				break;
			}
		}
	};
</script>
</head>
<body>
<iframe id="frame" style="width: 1000px; height: 700px; resize: both;" src="dragdrop_indicator_container.html"></iframe>
<br>
<button onclick="javascript:add()">Add</button>
<button onclick="javascript:set()">Set</button>
<button onclick="javascript:device('mobile')">Mobile</button>
<button onclick="javascript:device('desktop')">Desktop</button>
<button onclick="javascript:setBorder('border-color', 'black')">Border black</button>
<button onclick="javascript:setBorder('border-width', '4px')">Border width</button>
<button onclick="javascript:removeAll()">Remoce All</button>
<button onclick="javascript:exportProject()">Export</button>
<button onclick="javascript:importProject()">Import</button>
</body>
</html>